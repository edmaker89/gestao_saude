{% extends "base.html" %}
{% block content %}
{% from 'components/card_permission.html' import card_permission %}
    <div class="has-background-white p-4 has-rounded-sm">
        <p><strong>Perfil: </strong>{{role.nome}}</p>
        <p><strong>Descrição: </strong>{{role.descricao}}</p>
        <div class="has-text-right mb-4">
            <a class="button is-info mr-2" href="{{url_for('admin.roles')}}"><i class="fa-solid fa-arrow-left mr-2"></i>Voltar</a>
            <a class="button is-link" onclick="openNewPermission({{role.id}})"><i class="fa-solid fa-plus mr-2"></i>nova permissão</a>
        </div>
        <div class="notification p-3 bg-blue-plus">
            <div class="columns">
                <div class="column is-flex is-align-items-center">
                    <p>
                        <strong class="">
                            Lista de permissões:
                        </strong>
                    </p>
                </div>
                <div class="column">
                    
                </div>
            </div>
          </div>
          <div class="columns">
            <div class="column">
                <div class="is-flex is-justify-content-space-between">
                    <div>
                        <span class=""><strong>Atribuidos</strong></span>
                    </div>
                    <div class="has-text-right">
                        <a href=""> - remover todos</a>
                    </div>
                </div>
                {% if 'gerenciar permissão' in user_permissions %}
                    {% set permitido = True %}
                {% else%}
                    {% set permitido = '' %}
                {% endif %}
                
                {% for linked in permission_linked %}
                        {{ card_permission(linked.nome, 'remover', role.id, linked.id, permitido)}}
                {% endfor %}
            </div>
            <div class="column">
                <div class="is-flex is-justify-content-space-between">
                    <div>
                        <span class=""><strong>Não atribuidos</strong></span>
                    </div>
                    <div class="has-text-right">
                        <a href=""> + adicionar todos</a>
                    </div>
                </div>
                {% for unliked in unlinked_permissions %}
                        {{ card_permission(unliked.nome, 'adicionar', role.id, unliked.id, permitido)}}
                {% endfor %}
                
            </div>
          </div>
    </div>
{% include "components/modals/permission.html" %}
{% endblock content %}

